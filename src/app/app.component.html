<dhis-menu></dhis-menu>


<main class="container pt-5" style="margin-top: 15px;max-width: 1840px;">

  <!--<div class="card mr-auto data-chooser" [ngStyle]="{width: sheetWidth}" >-->
  <!--&lt;!&ndash;<div class="card mb-5">&ndash;&gt;-->
    <!--<div class="parameter-header">Choose assignments</div>-->
    <!--<div class="parameter-section">-->
      <!--<div class="btn btn-outline-primary {{orgUintActive}}" (click)="showOrgunit()">Organisation Unit</div>-->
      <!--<div class="btn btn-outline-primary {{dataSetActive}}" (click)="showDataSet()">Data Sets</div>-->
      <!--<div class="btn btn-outline-primary {{programActive}}" (click)="showProgram()">Program</div>-->
    <!--</div>-->

    <!--<div class="parameter-selector" [ngStyle]="{height: sheetHeight}">-->
      <!--<div *ngIf="showOrgUnits">-->
        <!--&lt;!&ndash;organisation unit tree&ndash;&gt;-->
        <!--<app-org-unit-filter-->
          <!--[orgunit_model] = "orgUnit.data.orgunit_settings"-->
          <!--[showUpdate]="true"-->
          <!--(onOrgUnitModelUpdate) = "updateOrgUnitModel($event)"-->
          <!--(selectedOrgUnit)="getNewOrgUnit($event)"-->
          <!--(deSelectedOrgUnit)="removeDeselectedOrgUnit($event)"-->
        <!--&gt;</app-org-unit-filter>-->
        <!--&lt;!&ndash;end of organisation unit tree&ndash;&gt;-->
      <!--</div>-->
      <!--<div *ngIf="showDataSets">-->
        <!--<app-data-sets (exportedDataset)="receiveData($event)"></app-data-sets>-->

      <!--</div>-->
      <!--<div *ngIf="showPrograms">-->
        <!--<app-programs (exportedProgram)="receiveData($event)"></app-programs>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <div class="visualization-filter-section" >
  <div class="visualization-filter-buttons">
    <!--<button class="dashboard-btn visualization-filter-btn " title="Filter by different dimensions"-->
            <!--(click)="toggleFilters($event)"  >-->
      <!--<img src="./assets/icons/filter.png" alt="" *ngIf="!showFilters" class=" filter-image " >-->
      <!--<img *ngIf="showFilters" src="./assets/icons/close.png" alt="" >-->
    <!--</button>-->
    <div  class="visualization-filter-list"  >
      <button class="dashboard-btn org-unit-filter-btn "  title="Filter by organisation unit"
              (click)="toggleCurrentFilter($event, 'ORG_UNIT')" >
        <img src="./assets/icons/tree.png" alt="">&nbsp;Org-Unit
      </button>

      <button class="dashboard-btn data-filter-btn "
              title="Filter by data" (click)="toggleCurrentFilter($event, 'DATA')" >
        <img src="./assets/icons/data.png" alt="">&nbsp;Data
      </button>
      <!--<button class="dashboard-btn period-filter-btn "  title="Filter by period"-->
      <!--(click)="toggleCurrentFilter($event, '')"-->
      <!--&gt;-->
      <!--<img src="./assets/icons/period.png" alt="">&nbsp;P eriod-->
      <!--</button>-->

      <button class="dashboard-btn layout-filter-btn "
              title="Change layout" (click)="toggleCurrentFilter($event, 'LAYOUT')" >
        <img src="./assets/icons/layout.png" alt="">&nbsp;Layout
      </button>
    </div>
  </div>
    <div style="margin-left:30%; margin-top: 3px; font-weight: bold; font-size: larger" >Organisation Unit Assignment Table</div>
  </div>


        <!--table section begins-->
  <div class="card mb-5 table-section">

    <div class="card-header" style="display: inline-flex; background-color: white; padding: 2px">


      <div class="visualization-filter-body dashboard-border" appClickOutside  *ngIf="selectedFilter">
        <app-org-unit-filter *ngIf="selectedFilter === 'ORG_UNIT'"
                             [orgunit_model] = "orgUnit.data.orgunit_settings"
                             [showUpdate]="true"
                             (onOrgUnitModelUpdate) = "updateOrgUnitModel($event)"
                             (selectedOrgUnit)="getNewOrgUnit($event)"
                             (wasFirstEmitted)="initOrgUnits($event)"
                             (deSelectedOrgUnit)="removeDeselectedOrgUnit($event)"
                             (hideOrgUnitSelection)="shutdownOrgUnitSelection($event)"
        ></app-org-unit-filter>

        <app-data-filter *ngIf="selectedFilter === 'DATA'"
                         (updatedListToTable)="receiveData($event)"
                         (onDataFilterClose)="shutdownOrgUnitSelection($event)"
                         [selectedItems]="selectedData"
        ></app-data-filter>


        <app-layout *ngIf="selectedFilter === 'LAYOUT'" ></app-layout>
      </div>




      <!--LOADER ANIMATIONS-->
      <div class="loader-holder" *ngIf="showLoader" >
        <div  style="text-align:center;height: 50px">
          <svg width='70px' height='50px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"
               preserveAspectRatio="xMidYMid" class="uil-balls">
            <rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect>
            <g transform="rotate(0 50 50)">
              <circle r="5" cx="30" cy="50">
                <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                  dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                  keyTimes="0;1"/>
                <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                         values="#c5523f;#f2b736"/>
              </circle>
            </g>
            <g transform="rotate(120 50 50)">
              <circle r="5" cx="30" cy="50">
                <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                  dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                  keyTimes="0;1"/>
                <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                         values="#f2b736;#499255"/>
              </circle>
            </g>
            <g transform="rotate(240 50 50)">
              <circle r="5" cx="30" cy="50">
                <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                  dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                  keyTimes="0;1"/>
                <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                         values="#499255;#c5523f"/>
              </circle>
            </g>
          </svg>
        </div>
        <div class="loaderInfo">{{loaderMessage}}</div>
      </div>



      </div>






    <div class="card-block p-0">

      <table class="table table-bordered table-sm m-0" id="assignment-table">
        <thead class="">
        <tr *ngIf="showTable">
          <th width="100px"  >OrgUnit / DataSets</th>
          <th *ngFor="let data of selectedData" width="100px"  >{{data.displayName}}</th>
        </tr>
        <tr *ngIf="!showTable">
          <th width="100px"  >OrgUnit / DataSets</th>
        </tr>
        </thead>
        <tbody *ngIf="showTable">
        <tr  *ngFor="let orgUnit of tempOrgUnuits | paginate: { id: 'listing_pagination',itemsPerPage:itemsOnPage,currentPage: page,totalItems: totalRec }" id="{{orgUnit.id}}" >

          <td>{{orgUnit.name}}</td>
          <td *ngFor="let dataOrgUnit of orgUnit.assigned" id="{{orgUnit.id+'-'+dataOrgUnit.id}}" >
            <div style="height: 29px;">
            <img *ngIf="dataOrgUnit.assigned" class="circular-checkbox" src="./assets/tick.png" alt="" (click)="checkBoxChanged(orgUnit,dataOrgUnit,dataOrgUnit.assigned,$event)" >
            <img *ngIf="!dataOrgUnit.assigned" class="circular-checkbox" src="./assets/cross.png" alt="" (click)="checkBoxChanged(orgUnit,dataOrgUnit,dataOrgUnit.assigned,$event)" >
            </div>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

    <!--card-footer p-0-->
    <div class="  below-section"  style=" background-color: white">
      <nav aria-label="..." >
        <!--<ul class="pagination justify-content-end mt-3 mr-3 bottom-section" *ngIf="totalRec>2">-->
        <ul class="pagination float-right bottom-section" *ngIf="totalRec>20">
          <div class="justify-content-end" style="display: inline-flex; padding: 5px">Show
            <select name="list-count" id="list-count" class="form-control" style="margin-left: 6px" [(ngModel)]="itemsOnPage" (change)="pageSizeChange($event.target.value)">
              <option value="20">20</option>
              <option value="All">All</option>
            </select>
          </div>
      <pagination-controls  id="listing_pagination" maxSize="5" directionLinks="true" (pageChange)="page = $event"></pagination-controls>
        </ul>
      </nav>
    </div>

  </div>
</main>








